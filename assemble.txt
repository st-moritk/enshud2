.STPUSH1 NOP
SETIX FFFF
LDDA
SETIX 8001
STDA
LDIA 01
SETIX FFFE
LDDB
ANDB
CMP
JPZ .PUSHED1
JP .STPUSH1
.PUSHED1 NOP
LDIA 01
SETIX FFFE
LDDB
ANDB
LDIA 00
CMP
JPZ .RELEASED1
JP .PUSHED1
.RELEASED1 NOP
.STPUSH2 NOP
SETIX FFFF
LDDA
SETIX 8002
STDA
LDIA 01
SETIX FFFE
LDDB
ANDB
CMP
JPZ .PUSHED2
JP .STPUSH2
.PUSHED2 NOP
LDIA 01
SETIX FFFE
LDDB
ANDB
LDIA 00
CMP
JPZ .RELEASED2
JP .PUSHED2
.RELEASED2 NOP
.INFINIT NOP
SETIX 8001
LDDA
SETIX 8002
LDDB
SUBA
LDIB 80
ANDA
CMP
JPZ .ELSE
.LOOP1 NOP
SETIX 8001
LDDA
SETIX 8002
LDDB
SUBA
LDIB 80
ANDA
CMP
JPZ .LOOPEND1
SETIX 8001
LDDA
SETIX 8002
LDDB
SUBA
JPZ .A0
SETIX 8001
STDA
JP .LOOP1
.A0 NOP
JP .FINISH
.LOOPEND1 NOP
JP .IFEND
.ELSE NOP
.LOOP2 NOP
SETIX 8002
LDDA
SETIX 8001
LDDB
SUBA
LDIB 80
ANDA
CMP
JPZ .LOOPEND2
SETIX 8002
LDDA
SETIX 8001
LDDB
SUBA
JPZ .B0
SETIX 8002
STDA
JP .LOOP2
.B0 NOP
JP .FINISH
.LOOPEND2 NOP
.IFEND NOP
JP .INFINIT
.FINISH NOP
SETIX 8001
LDDA
